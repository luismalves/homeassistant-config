title: Sala
path: living
background: "var(--background-view-living)"

type: custom:vertical-layout
layout:
  card_margin: 8px 0px
  margin: 0px
  max_width: 350
cards:
  - type: "custom:gap-card"
    height: 40

  - type: "custom:layout-card"
    layout_type: "custom:grid-layout"
    layout:
      grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr
      grid-template-rows: auto
      margin: 0px
    cards:
      - template: title
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 6
        variables:
          - content: Sala de estar

      - type: markdown
        view_layout:
          grid-column: span 6
        style: >
          ha-card {
            box-shadow: none;
            height: 100%;
            background: none;
            font-weight: 700;
            font-size: 1.2em;
            color: var(--el-title-color);
            margin-left: -15px;
            margin-top: -17px;
            margin-bottom: 0px;
          }
        content: >
          {% if states.sensor.lights_on_living_room.state == "0" %} Não existem luzes ligadas.{% elif states.sensor.lights_on_living_room.state == "1" %} {{states.sensor.lights_on_living_room.state}} luz ligada. {% else %} {{states.sensor.lights_on_living_room.state}} luzes ligadas. {% endif %}

      - type: custom:auto-entities
        view_layout:
          grid-column: span 6
        show_empty: false
        filter:
          include:
            - entity_id: "sensor.humidity_1"
              state: ">80.0"
        card:
          type: markdown
          style: !include ../styles/style-card-alert.yaml
          content: Humidade muito elevada.

      - template: es-light-tasmota
        view_layout:
          grid-column: span 2
        type: "custom:decluttering-card"
        variables:
          - template: light-strip
          - entity-1: light.led_strip_living_room
          - name-1: "LED Strip"
          - state-1: "on"
          - state-2: "off"
          - circle-1: entity.attributes.brightness
          - circle-2: (254 / 100)
          - circle-3: "on"
          - circle-4: brightness

      - template: es-light-switch
        view_layout:
          grid-column: span 2
        type: "custom:decluttering-card"
        variables:
          - template: light-pendant
          - entity-1: light.luz_sala
          - entity-switch: light.shelly_living_room_light
          - name-1: "Luz Sala"
          - state-1: "on"
          - state-2: "off"
          - circle-1: entity.attributes.brightness
          - circle-2: (254 / 100)
          - circle-3: "on"
          - circle-4: brightness

      - template: es-light-switch-2
        view_layout:
          grid-column: span 2
        type: "custom:decluttering-card"
        variables:
          - template: light-pendant
          - entity-1: light.luz_mesa
          - entity-2: light.luz_mesa_1
          - entity-3: light.luz_mesa_2
          - entity-switch: light.shelly_table_light
          - name-1: "Luz Mesa"
          - state-1: "on"
          - state-2: "off"
          - circle-1: entity.attributes.brightness
          - circle-2: (254 / 100)
          - circle-3: "on"
          - circle-4: brightness

      - template: es-switch
        view_layout:
          grid-column: span 2
        type: "custom:decluttering-card"
        variables:
          - template: switch
          - entity-1: switch.smart_plug
          - name-1: Tomada TV
          - entity-power: sensor.smart_plug_power

      - template: es-tv
        view_layout:
          grid-column: span 2
        type: "custom:decluttering-card"
        variables:
          - template: tv
          - entity-1: remote.android_tv
          - name-1: "Android TV"
          - state-1: "on"
          - state-2: "on"
          - state-3: "off"
          - state-4: "unavailable"

      - template: sensor-living_room
        view_layout:
          grid-column: span 2
        type: "custom:decluttering-card"
        variables:
          - template: sensors-living_room
          - entity-1: sensor.presence_living_room
          - name-1: "Sensores"

      # After christmas, comment ligth code and change back shutters card to one half in ui-lovelace.yaml
      # - template: es-light
      #   type: "custom:decluttering-card"
      #   variables:
      #     - template: light-xmas
      #     - entity-1: light.wled_xmas
      #     - name-1: "Árvore Natal"
      #     - state-1: "on"
      #     - state-2: "off"
      #     - circle-1: entity.attributes.brightness
      #     - circle-2: (254 / 100)
      #     - circle-3: "on"
      #     - circle-4: brightness

      - template: es-cover
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 3
        variables:
          - template: shutter
          - toggle-script: script.toggle_cover_left
          - entity-1: cover.shelly_roller_left
          - name-1: Estores Esquerda
          - state-1: "open"
          - state-2: "closed"
          - circle-1: entity.attributes.current_position
          - circle-2: 1
          - circle-3: "open"
          - circle-4: current_position

      - template: es-cover
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 3
        variables:
          - template: shutter
          - toggle-script: script.toggle_cover_right
          - entity-1: cover.shelly_roller_right
          - name-1: Estores Direita
          - state-1: "open"
          - state-2: "closed"
          - circle-1: entity.attributes.current_position
          - circle-2: 1
          - circle-3: "open"
          - circle-4: current_position

      - template: es-ping
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 2
        variables:
          - template: sensor-xbox
          - entity-1: binary_sensor.xbox_one_x_state
          - name-1: XBOX

      - template: es-camera
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 2
        variables:
          - template: camera
          - entity-1: camera.mi_cam
          - name-1: "Camera"
          - state-1: detected
          - state-2: idle

      - type: "custom:gap-card"
        height: 10
        view_layout:
          grid-column: span 6

      # Final section of scenes
      - template: scene
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 2
        variables:
          - template: scene-movie
          - scene-1: scene.movie_time
          - entity-1: scene.movie_time

      - template: scene
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 2
        variables:
          - template: scene-bird
          - scene-1: scene.bird_rest_time
          - entity-1: scene.bird_rest_time

      - template: es-boolean
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 2
        variables:
          - template: shutter-temp
          - entity-1: input_boolean.open_blinds_temporarly
          - name-1: Abrir por hoje
          - state-1: "on"
          - state-2: "off"

      - type: conditional
        conditions:
          - entity: sensor.lights_on_living_room
            state_not: "0"
        card:
          type: horizontal-stack
          cards:
            - type: "custom:decluttering-card"
              template: script
              view_layout:
                grid-column: span 2
              variables:
                - entity-1: sensor.lights_on_living_room
                - template: script-lights-off
                - script: script.turn_off_living_room
                - name: "Desligar luzes"
