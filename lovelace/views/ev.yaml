title: EV
path: EV
panel: true
#icon: mdi:cog-box
visible: true
background: "var(--background-view-ev)"

cards:
  - type: custom:layout-card
    layout_type: custom:vertical-layout
    layout:
      width: 200
      max_width: 350
      column_widths: 98%
    cards:
      - type: "custom:gap-card"
        height: 40

      - type: custom:button-card
        name: "ID.3"
        styles:
          grid:
            - grid-template-areas: '"icon_hue n"'
            - grid-template-columns: min-content 1fr
          card:
            - background: none
            - margin-left: -2px
            - margin-top: -20px
            - margin-bottom: -15px
            - pointer-events: none
          name:
            - color: var(--el-title-color)
            - font-weight: bold
            - font-size: 24px
            - justify-self: flex-start
            - margin-left: 2px
          custom_fields:
            icon_hue:
              - color: var(--el-title-color)
              - height: 28px
              - width: 26px
        custom_fields: !include ../icons/vw.yaml

      - type: "custom:gap-card"
        height: 5

      - type: "custom:decluttering-card"
        template: car-state
        variables:
          - entity_range: sensor.my_id_range
          - entity-battery: sensor.my_id_state_of_charge

      # - type: "custom:decluttering-card"
      #   template: map-card

      - type: horizontal-stack
        cards:
          - type: "custom:decluttering-card"
            template: car-stats
            variables:
              - entity: sensor.my_id_charging_state
              - name: "Carregamento"
              - template: sensors-car-charge-1

          - type: "custom:decluttering-card"
            template: car-stats
            variables:
              - entity: sensor.my_id_charging_state
              - name: "Estatisticas"
              - template: sensors-car-charge-2

      - type: custom:vertical-stack-in-card
        style: |
          ha-card.type-custom-vertical-stack-in-card {
            background-color: var(--ha-card-background-es-static);
          }
          ha-card.type-custom-vertical-stack-in-card > div {
            padding: 0px 15px 5px;
          }
        cards:
          - type: "custom:button-card"
            name: Opções de carregamento
            show_icon: false
            show_state: false
            tap_action:
              action: none
            styles: !include ../styles/style-card-car-header.yaml
            custom_fields:
              subtitle: >
                [[[
                  return `<span>Com base na bateria atual de ${states['sensor.my_id_state_of_charge'].state}%</span>`
                ]]]

          - type: horizontal-stack
            cards:
              - type: "custom:decluttering-card"
                template: car-charge-option
                variables:
                  - entity: sensor.my_id_state_of_charge
                  - type: "AC"
                  - icon: mdi:ev-plug-type2
                  - rate: "3.7"
                  - template: sensors-car-charge-option

              - type: "custom:decluttering-card"
                template: car-charge-option
                variables:
                  - entity: sensor.my_id_state_of_charge
                  - type: "AC"
                  - icon: mdi:ev-plug-type2
                  - rate: "11"
                  - template: sensors-car-charge-option

              - type: "custom:decluttering-card"
                template: car-charge-option
                variables:
                  - entity: sensor.my_id_state_of_charge
                  - type: "DC"
                  - icon: mdi:ev-plug-ccs2
                  - rate: "50"
                  - template: sensors-car-charge-option

              - type: "custom:decluttering-card"
                template: car-charge-option
                variables:
                  - entity: sensor.my_id_state_of_charge
                  - type: "DC"
                  - icon: mdi:ev-plug-ccs2
                  - rate: "100"
                  - template: sensors-car-charge-option

      - type: horizontal-stack
        cards:
          - type: "custom:decluttering-card"
            template: climate-vw
            variables:
              - entity-climate-state: sensor.my_id_climatisation_state
              - entity-climate-target: input_number.target_vw_id_3_temperature
              - entity-climate-current: number.my_id_target_climate_temperature
              - name: "Clima"
              - template: sensors-climate

      - type: "custom:gap-card"
        height: 15
