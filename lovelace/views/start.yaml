title: Home
path: start
panel: true
icon: mdi:home-circle
background: "linear-gradient(315deg, #ffcfdf 0%, #b0f3f1 74%)"

cards:
  - type: custom:layout-card
    layout_type: custom:vertical-layout
    layout:
      width: 200
      max_width: 350
      column_widths: 98%
    cards:
      - cards:
          - height: 25
            type: "custom:gap-card"
          - height: 25
            type: "custom:gap-card"
          - height: 25
            type: "custom:gap-card"
        type: horizontal-stack

      - type: horizontal-stack
        cards:
          - type: markdown
            style: >
              ha-card {
                box-shadow: none;
                height: 100%;
                background: none;
                font-family: San Francisco;
                font-weight: 700;
                font-size: 3em;
                line-height: 1em;
                color: #333;
                text-rendering: optimizeLegibility;
                margin-left: -15px;
              }
            content: |
              Olá {{user}}

      - type: custom:auto-entities
        show_empty: false
        filter:
          include:
            - entity_id: "sensor.door_show_time"
              state: "on"
        card:
          type: markdown
          style: >
            ha-card {
              box-shadow: none;
              height: 100%;
              background: rgb(255,103,0);
              font-family: San Francisco;
              font-weight: 700;
              font-size: 1.2em;
              color: #fff;
              margin-bottom: 0px;
            }
            ha-markdown {
              padding: 10px 16px !important;
            }
          content: >
            {% if states.sensor.door_open_for.state | int > 0 %} Porta aberta à {{states.sensor.door_open_for.state}} minutos.{% else %} Porta foi aberta à {{states.sensor.door_open_last.state}} minutos.{% endif %}

      - cards:
          - height: 10
            size: 30
            type: "custom:gap-card"
          - height: 10
            size: 30
            type: "custom:gap-card"
          - height: 10
            size: 30
            type: "custom:gap-card"
        type: horizontal-stack

      - type: horizontal-stack
        cards:
          - template: path-division
            type: "custom:decluttering-card"
            variables:
              - template: path-living-room
              - entity-1: input_boolean.home_ocuppied
              - name-1: "Sala"
              - navigation_path: /lovelace/sala

          - template: path-division
            type: "custom:decluttering-card"
            variables:
              - template: path-kitchen
              - entity-1: input_boolean.home_ocuppied
              - name-1: "Cozinha"
              - navigation_path: /lovelace/kitchen

      - type: horizontal-stack
        cards:
          - template: path-division
            type: "custom:decluttering-card"
            variables:
              - template: path-deck
              - entity-1: input_boolean.home_ocuppied
              - name-1: "Deck"
              - navigation_path: /lovelace/deck

          - template: path-division
            type: "custom:decluttering-card"
            variables:
              - template: path-bedroom
              - entity-1: input_boolean.home_ocuppied
              - name-1: "Quarto"
              - navigation_path: /lovelace/bedroom

      - cards:
          - height: 10
            size: 30
            type: "custom:gap-card"
          - height: 10
            size: 30
            type: "custom:gap-card"
          - height: 10
            size: 30
            type: "custom:gap-card"
        type: horizontal-stack

      - entity: weather.inicio
        type: weather-forecast
        style: |
          .type-weather-forecast {
            color: rgb(0,0,0);
            background: rgb(255,255,255);
            margin-top: 0px !important;
            font-family: San Francisco;
            border-radius: 10px;
            box-shadow: none;
          }

          .forecast > div > div:first-child,
          .temp-attribute .temp,
          .state {
            font-weight: 700;
          }

      - type: "custom:vertical-stack-in-card"
        horizontal: false
        style: |
          ha-card {
            background: #FFF;
            border-radius: 15px;
            box-shadow: none;
            color: rgba(0, 0, 0);
            font-family: San Francisco;
            text-rendering: optimizeLegibility;
          }
        cards:
          - template: sensor-energy
            type: "custom:decluttering-card"
            variables:
              - name-1: Consumo energético
              - template: sensors-energy

          - type: "custom:mini-graph-card"
            entities:
              - entity: sensor.energy_bill
                name: Energia diária
                show_legend: false
                show_state: false
            show:
              name: false
              icon: false
              state: false
              labels: true
              labels_secondary: true
              graph: bar
            tap_action:
              action: none
            hours_to_show: 168
            aggregate_func: delta
            group_by: date
            font_size: 65
            color_thresholds:
              - value: 1
                color: "#417656"
              - value: 1.2
                color: "#579E72"
              - value: 1.3
                color: "#6EAF88"
              - value: 1.35
                color: "#D1B161"
              - value: 1.4
                color: "#C8A241"
              - value: 1.5
                color: "#7D1224"
              - value: 1.8
                color: "#590D1A"
            style: |
              ha-card {
                background: #FFF;
                border-radius: 15px;
                box-shadow: none;
                color: rgba(255, 255, 255);
                font-family: San Francisco;
                padding: 0;
                text-rendering: optimizeLegibility;
              }

      - cards:
          - height: 10
            size: 30
            type: "custom:gap-card"
          - height: 10
            size: 30
            type: "custom:gap-card"
          - height: 10
            size: 30
            type: "custom:gap-card"
        type: horizontal-stack

      - type: horizontal-stack
        cards:
          - cards:
              - template: es-person
                type: "custom:decluttering-card"
                variables:
                  - template: person-girl
                  - entity-1: input_boolean.margarida_home
                  - name-1: "Ma"
                  - state-1: "on"
                  - state-2: "off"
              - template: es-person
                type: "custom:decluttering-card"
                variables:
                  - template: person-man
                  - entity-1: input_boolean.luis_home
                  - name-1: "Lu"
                  - state-1: "on"
                  - state-2: "off"
            type: vertical-stack

          - template: es-dummy
            type: "custom:decluttering-card"
            variables:
              - template: house
              - entity-1: input_boolean.home_ocuppied
              - name-1: "Casa"
              - state-1: "on"
              - state-2: "off"

          - template: es-script
            type: "custom:decluttering-card"
            variables:
              - template: scene-christmas
              - script-1: script.start_xmas_1
              - entity-1: light.wled_xmas
              - name-1: "É Natal!"
              - state-1: "on"
              - state-2: "off"

      - type: horizontal-stack
        cards:
          - template: es-boolean
            type: "custom:decluttering-card"
            variables:
              - template: shutter-temp
              - entity-1: input_boolean.open_blinds_temporarly
              - name-1: Abrir por hoje
              - state-1: "on"
              - state-2: "off"

          - template: es-mood
            type: "custom:decluttering-card"
            variables:
              - template: light-strip-3
              #- script-1: script.start_xmas_1
              #- entity-1: light.wled_xmas
              - name-1: "Moods"
              #- state-1: "on"

          - height: 10
            size: 30
            type: "custom:gap-card"

      - cards:
          - height: 30
            size: 30
            type: "custom:gap-card"
          - height: 30
            size: 30
            type: "custom:gap-card"
          - height: 30
            size: 30
            type: "custom:gap-card"
        type: horizontal-stack
