####
# VIEW
# Pet
####
title: Moon
path: pet
icon: mdi:cat
background: "var(--background-view-kitchen)"

type: custom:vertical-layout
layout:
  card_margin: 8px 0px
  margin: 0px
  max_width: 350
cards:
  - type: "custom:gap-card"
    height: 15

  - type: "custom:layout-card"
    layout_type: "custom:grid-layout"
    layout:
      grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr
      grid-template-rows: auto
      margin: 0px
    cards:
      - template: title
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 6
        variables:
          - content: Cat care

      - type: "custom:gap-card"
        height: 10
        view_layout:
          grid-column: span 6

      - template: pet-litter
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 4

      - type: custom:mod-card
        view_layout:
          grid-column: span 2
        card_mod:
          style:
            layout-card $ grid-layout $: "#root { --masonry-view-card-margin: 3.3px 0; align-items: center;}"
        card:
          type: "custom:layout-card"
          view_layout:
            grid-column: span 1
          layout_type: "custom:grid-layout"
          layout:
            card_margin: 0px
            grid-template-columns: 1fr
            grid-template-rows: 1fr 1fr
            height: 100%
            margin: 0
            padding: 0
          cards:
            - template: btn-small-confirmation
              type: "custom:decluttering-card"
              variables:
                - template: btn-script
                - service: script.turn_on
                - entity: script.set_current_litter_change
                - name: "Areia revista"

            - template: btn-small-confirmation
              type: "custom:decluttering-card"
              variables:
                - template: btn-script
                - service: script.turn_on
                - entity: script.set_current_litter_full_change
                - name: "Areia trocada"

      - type: "custom:gap-card"
        height: 12
        view_layout:
          grid-column: span 6

      - template: pet-fountain
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 6

      - type: custom:vertical-stack-in-card
        view_layout:
          grid-column: span 4
        card_mod:
          style: |
            ha-card.type-custom-vertical-stack-in-card {
              background-color: var(--ha-card-background-es-static);
            }
            apexcharts-card { --primary-text-color: var(--el-graph-bar-color); }
            ha-card.type-custom-vertical-stack-in-card > div {
              padding: 0px 15px 5px;
            }
        cards:
          - type: "custom:button-card"
            name: √Ågua por dia
            show_icon: false
            show_state: false
            tap_action:
              action: none
            styles: !include ../styles/style-card-car-header.yaml

          - type: custom:apexcharts-card
            graph_span: 7d
            span:
              end: day
            yaxis:
              - show: false
                min: 0
                apex_config:
                  padding:
                    left: 0
                    right: 0
            series:
              - entity: sensor.petlibro_plwf105_water_consumption_24hrs_ml
                type: column
                color: "var(--contrast11)"
                group_by:
                  duration: 1d
                  func: max
                show:
                  datalabels: true
            apex_config:
              chart:
                height: "80px"
                fontFamily: "var(--paper-ha-card_-_font-family)"
                parentHeightOffset: 0
                offsetY: 5
                width: "180px"
              tooltip:
                enabled: false
              grid:
                show: false
                padding:
                  bottom: -5
                  left: -20
                  right: -15
                  top: -15
              dataLabels:
                show: true
                offsetY: -10
                formatter: |
                  EVAL:function(value) {
                    if(value) {
                      return value.toFixed(0);
                    }
                  }
                style:
                  fontSize: "12px"
                  colors: ["var(--el-graph-bar-color)"]
                background:
                  enabled: false
              plotOptions:
                bar:
                  borderRadius: 6
                  borderRadiusApplication: "end"
                  columnWidth: "85%"
              xaxis:
                tickPlacement: "on"
                crosshairs:
                  show: false
                axisTicks:
                  show: false
                  height: 0
                labels:
                  show: true
                  hideOverlappingLabels: false
                  format: "d/M"
                  offsetY: -5
                  style:
                    fontSize: "10px"
            card_mod:
              style: |-
                ha-card.type-custom-apexcharts-card {
                  background: transparent;
                }

      - type: custom:mod-card
        view_layout:
          grid-column: span 2
        card_mod:
          style:
            layout-card $ grid-layout $: "#root { --masonry-view-card-margin: 3.3px 0; align-items: center;}"
        card:
          type: "custom:layout-card"
          view_layout:
            grid-column: span 1
          layout_type: "custom:grid-layout"
          layout:
            card_margin: 0px
            grid-template-columns: 1fr
            grid-template-rows: 1fr 1fr
            height: 100%
            margin: 0
            padding: 0
          cards:
            - template: es-boolean
              type: "custom:decluttering-card"
              variables:
                - template: shutter
                - entity: switch.petlibro_plwf105_pump
                - name: Bomba
                - state-1: "on"
                - state-2: "off"
            - template: es-boolean
              type: "custom:decluttering-card"
              variables:
                - template: shutter
                - entity: switch.petlibro_plwf105_pump_interval
                - name: Alternado
                - state-1: "on"
                - state-2: "off"

      - type: "custom:gap-card"
        height: 12
        view_layout:
          grid-column: span 6

      - template: pet-feeder
        type: "custom:decluttering-card"
        view_layout:
          grid-column: span 6

      - type: "custom:gap-card"
        height: 10
        view_layout:
          grid-column: span 6
